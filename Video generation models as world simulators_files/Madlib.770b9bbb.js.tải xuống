import M from"./InlineVideo.ceb7cabc.js";import{r as h,y as v,g as I,S as D,o as r,c as d,d as l,F as y,G as k,b as n,t as g,i as O,m as j}from"./entry.3fed4871.js";import"./BlockTimedTabs.vue.6d03a11a.js";import"./Footer.fe671c3d.js";import"./snippets.3042dd9d.js";import"./LazyAutoPausingVimeo.05ddfc43.js";import"./usePageTransition.7314f674.js";const B={class:"w-full"},T={class:"bg-[color:var(--gray-300)] scroll-mt-64 md:scroll-mt-80 relative",ref:"root"},C={class:"py-spacing-5 lg:py-spacing-7 f-body-1"},E={class:"container"},N={class:"grid-layout"},S={class:"md:grid-col-start-2 lg:grid-col-start-1 md:grid-col-span-4 lg:grid-col-span-5 grid-col-span-8"},V={class:"flex flex-col items-start grow"},A={class:"flex flex-col items-start grow w-full"},F={class:"w-full md:pr-12 lg:pr-24"},K={class:"inline mr-8 md:text-xl lg:text-3xl md:text-right text-secondary leading-relaxed"},R={key:0,class:"inline-block"},$={class:"relative inline-block"},q={class:"opacity-0 font-bold whitespace-nowrap"},G=["onChange","value"],L=["value"],P={key:1,class:"inline-block"},U={key:0,class:"md:grid-col-span-7 md:grid-col-start-6 grid-col-span-8"},Z={__name:"Madlib",props:{data:{type:Object,required:!0}},setup(x){const i=x,s=h(null),m=h(null),p=v(()=>s.value===null?null:i.data.prompt.map(t=>{if(t&&t.key!=null){const e=s.value[t.key],c=i.data.options.filter(({key:_})=>_===t.key);if(!c.length)return"";const o=c[0].data[e];return o?o.replaceAll(",",""):""}else return t}).join("").replaceAll(" ","-")),u=v(()=>{if(s.value===null)return[];const a={};return i.data.options.forEach(({key:t,data:e})=>{a[t]={key:t,selected:s.value[t],data:e.map((c,o)=>({label:c,selected:s.value[t]===o}))}}),a}),b=()=>{const a=i.data.options.map(({key:_})=>_),t=Math.floor(Math.random()*a.length),e=i.data.options[t].key,c=i.data.options[t].data,o=Math.floor(Math.random()*c.length);s.value={...s.value,[e]:s.value[e]===o?o===0?o+1:0:o}},w=(a,t)=>{f(),s.value={...s.value,[a]:t}},f=()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{b(),f()},8e3)};return I(()=>{const a={};i.data.options.forEach(t=>{let e=0;t.key==="characters"?e=2:(t.key==="clothings"||t.key==="places"||t.key==="weathers")&&(e=1),a[t.key]=e}),s.value=a,f()}),D(()=>{m.current&&clearTimeout(m.current)}),(a,t)=>(r(),d("div",B,[l("section",T,[l("div",C,[l("div",E,[l("div",N,[l("div",S,[l("div",V,[l("div",A,[l("div",F,[(r(!0),d(y,null,k(i.data.prompt,e=>(r(),d("div",K,[typeof e=="object"&&e.key&&n(u)[e.key]&&n(u)[e.key].data&&n(u)[e.key].data.length?(r(),d("div",R,[l("div",$,[l("div",q,g(n(u)[e.key].data[n(u)[e.key].selected].label),1),l("select",{class:"focus:outline-none focus-visible:ring focus-visible:ring-offset-border-primary appearance-none bg-transparent border-none underline p-0 absolute left-0 md:text-xl lg:text-3xl leading-relaxed font-bold top-0",onChange:c=>w(e.key,c.target.value),value:n(u)[e.key].selected},[(r(!0),d(y,null,k(n(u)[e.key].data,(c,o)=>(r(),d("option",{key:o,value:o},g(c.label),9,L))),128))],40,G)])])):(r(),d("div",P,g(e),1))]))),256))])])])]),n(p)!==null?(r(),d("div",U,[(r(),O(n(M),{className:"h-full w-full object-cover",key:n(p),data:{src:`https://cdn.openai.com/tmp/s/${n(p)}.mp4`,controls:!1,loop:!0,autoplayInView:!0}},null,8,["data"]))])):j("",!0)])])])],512)]))}};export{Z as default};
